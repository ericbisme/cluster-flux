apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: metallb
  namespace: kube-system
spec:
  releaseName: metallb
  targetNamespace: kube-system
  timeout: 300
  resetValues: false
  forceUpgrade: false
  chart:
    repository: https://kubernetes-charts.storage.googleapis.com/
    name: metallb
    version: 0.12.0
  values:
    configInline:
      address-pools:
        - name: default
          protocol: layer2
          addresses:
          - 192.168.10.128-192.168.10.254
          avoid-buggy-ips: true
    controller:
      resources:
        requests:
          cpu: 100m
          memory: 4Mi
        limits:
          cpu: 150m
          memory: 16Mi
    speaker:
      resources:
        requests:
          cpu: 1m
          memory: 4Mi
        limits:
          cpu: 16m
          memory: 16Mi
